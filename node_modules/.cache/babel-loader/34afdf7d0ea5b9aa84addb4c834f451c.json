{"ast":null,"code":"import * as echarts from \"echarts\";\nexport default {\n  data() {\n    return {\n      statisticsDate: [\"Tue Oct 11 2022 00:00:00 GMT+0800 (中国标准时间)\", \"Tue Nov 15 2022 23:59:59 GMT+0800 (中国标准时间)\"],\n      trendDate: [\"Tue Oct 11 2022 00:00:00 GMT+0800 (中国标准时间)\", \"Tue Nov 15 2022 23:59:59 GMT+0800 (中国标准时间)\"],\n      statisticsTime: [],\n      trendTime: [],\n      beginTime: null,\n      endTime: null,\n      today: \"\",\n      week: [],\n      sign: null,\n      loginName: null,\n      formInline: {\n        user: \"\"\n      },\n      statistics: \"\",\n      value1: \"\",\n      charts: \"\",\n      score: \"100\",\n      source: []\n    };\n  },\n\n  methods: {\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n\n    async getTime(dateArr, dateTime) {\n      let dateBegin = new Date(dateArr[0]);\n      let beginYear = dateBegin.getFullYear();\n      let beginMonth = dateBegin.getMonth() + 1;\n      beginMonth = beginMonth < 10 ? \"0\" + beginMonth : beginMonth;\n      let beginDate = dateBegin.getDate();\n      beginDate = beginDate < 10 ? \"0\" + beginDate : beginDate;\n      let beginTime = beginYear + \"-\" + beginMonth + \"-\" + beginDate;\n      let dateEnd = new Date(dateArr[1]);\n      let endYear = dateEnd.getFullYear();\n      let endMonth = dateEnd.getMonth() + 1;\n      endMonth = endMonth < 10 ? \"0\" + endMonth : endMonth;\n      let endDate = dateEnd.getDate();\n      endDate = endDate < 10 ? \"0\" + endDate : endDate;\n      let endTime = endYear + \"-\" + endMonth + \"-\" + endDate;\n      dateTime[0] = beginTime;\n      dateTime[1] = endTime;\n    },\n\n    todayTime() {\n      this.$set(this.statisticsDate, 0, new Date().toString());\n      this.$set(this.statisticsDate, 1, new Date().toString());\n    },\n\n    weekTime() {\n      let date = new Date();\n      let year = date.getFullYear();\n      let month = date.getMonth();\n      let day = date.getDate();\n      let week = date.getDay();\n      let thisWeekStartDate = new Date(year, month, day - week + 1);\n      let thisWeekEndDate = new Date(year, month + 1, day - week + 7);\n      this.$set(this.statisticsDate, 0, thisWeekStartDate);\n      this.$set(this.statisticsDate, 1, thisWeekEndDate);\n    },\n\n    monthTime() {\n      let date = new Date();\n      let year = date.getFullYear();\n      let month = date.getMonth();\n      let thisMonthStartDate = new Date(year, month, 1);\n      let thisMonthEndDate = new Date(year, month + 1, 0);\n      this.$set(this.statisticsDate, 0, thisMonthStartDate);\n      this.$set(this.statisticsDate, 1, thisMonthEndDate);\n    },\n\n    async getSign(time, data2) {\n      let data = data2;\n      data[\"key\"] = \"c4ca4238a0b923820dcc509a6f75849b\";\n      data[\"timestamp\"] = time;\n      await this.$axios({\n        method: \"post\",\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/Apibase/getSign\",\n        data: data\n      }).then(result => {\n        this.sign = result.data.data;\n      });\n    },\n\n    async login(time) {\n      let data1 = {\n        account: \"admin\",\n        password: \"123456\",\n        type: \"admin\"\n      };\n      await this.getSign(time, data1);\n      let data = {\n        account: \"admin\",\n        password: \"123456\",\n        type: \"admin\",\n        sign: this.sign,\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\n        timestamp: time\n      };\n      this.$axios({\n        method: \"post\",\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/login/Login\",\n        data: data\n      }).then(result => {\n        this.loginName = result.data.data.nickname;\n      });\n    },\n\n    async dataStatistics(time) {\n      let data1 = {\n        statistics_start_time: this.statisticsTime[0],\n        statistics_end_time: this.statisticsTime[1],\n        trend_start_time: this.trendTime[0],\n        trend_end_time: this.trendTime[1]\n      };\n      await this.getSign(time, data1);\n      let data = {\n        statistics_start_time: this.statisticsTime[0],\n        statistics_end_time: this.statisticsTime[1],\n        trend_start_time: this.trendTime[0],\n        trend_end_time: this.trendTime[1],\n        sign: this.sign,\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\n        timestamp: time\n      };\n      this.$axios({\n        method: \"post\",\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/admin/dataStatistics\",\n        data: data\n      }).then(result => {\n        this.statistics = result.data.data;\n        this.source = result.data.data.trend_data_statistics;\n      });\n    },\n\n    change() {\n      this.source = [{\n        time: \"2021-10-11\",\n        total: 9,\n        total_money: 110\n      }, {\n        time: \"2022-150-12\",\n        total: 9,\n        total_money: 110\n      }, {\n        time: \"2022-10-13\",\n        total: 9,\n        total_money: 110\n      }, {\n        time: \"2022-10-12\",\n        total: 9,\n        total_money: 110\n      }, {\n        time: \"2022-10-13\",\n        total: 9,\n        total_money: 110\n      }];\n    },\n\n    draw() {\n      let newPromise = new Promise(resolve => {\n        if (!this.echarts) resolve();\n      });\n      newPromise.then(() => {\n        this.charts = echarts.init(this.$refs.myChart);\n        this.charts.setOption({\n          legend: {\n            textStyle: {\n              //图例字体大小\n              fontSize: 10\n            },\n            icon: \"circle\",\n            //图例大小\n            itemHeight: 10,\n            itemWidth: 10,\n            //图例滚动显示\n            type: \"scroll\",\n            //图例位置\n            left: 550,\n            top: 0,\n            bottom: 30\n          },\n          tooltip: {},\n          dataset: {\n            source: this.source //连接数据\n\n          },\n          xAxis: {\n            type: \"category\"\n          },\n          yAxis: {\n            axisLine: {\n              show: true\n            },\n            axisTick: {\n              show: true\n            },\n            splitLine: {\n              show: false\n            }\n          },\n          grid: {\n            bottom: 30\n          },\n          series: [{\n            name: \"开票总数\",\n            type: \"bar\",\n            //表示这个是柱状图\n            label: {\n              show: true,\n              position: \"top\"\n            },\n            barCategoryGap: \"5%\",\n            barWidth: 10,\n            itemStyle: {\n              color: \"#49a9ee\"\n            },\n            //定义颜色\n            tooltip: {\n              formatter: params => {\n                return ` ${params.name.slice(0, 3)} <br/>\n                         ${params.seriesName}:${params.value.total}`;\n              }\n            }\n          }, {\n            name: \"开票总额\",\n            type: \"bar\",\n            label: {\n              show: true,\n              position: \"top\"\n            },\n            barCategoryGap: \"5%\",\n            barWidth: 10,\n            itemStyle: {\n              color: \"#98D87D\"\n            },\n            tooltip: {\n              formatter: params => {\n                return ` ${params.name} <br/>\n                         ${params.seriesName}:${params.value.total_money}`;\n              }\n            }\n          }]\n        });\n      });\n    }\n\n  },\n  watch: {\n    statisticsDate: {\n      handler: function () {\n        let time = parseInt(new Date().getTime() / 1000) + \"\";\n        this.getTime(this.statisticsDate, this.statisticsTime);\n        this.getTime(this.trendDate, this.trendTime);\n        this.dataStatistics(time);\n        setTimeout(() => {\n          this.$nextTick(function () {\n            this.charts.dispose();\n            this.draw();\n          });\n        }, 500);\n      },\n      deep: true\n    },\n    trendDate: {\n      handler: function () {\n        let time = parseInt(new Date().getTime() / 1000) + \"\";\n        this.getTime(this.statisticsDate, this.statisticsTime);\n        this.getTime(this.trendDate, this.trendTime);\n        this.dataStatistics(time);\n        setTimeout(() => {\n          this.$nextTick(function () {\n            this.charts.dispose();\n            this.draw();\n          });\n        }, 500);\n      },\n      deep: true\n    }\n  },\n\n  async mounted() {\n    let time = parseInt(new Date().getTime() / 1000) + \"\"; //获取10位时间戳\n\n    await this.login(time);\n    await this.getTime(this.statisticsDate, this.statisticsTime);\n    await this.getTime(this.trendDate, this.trendTime);\n    await this.dataStatistics(time);\n    setTimeout(() => {\n      this.$nextTick(function () {\n        this.draw();\n      });\n    }, 500);\n  }\n\n};","map":{"version":3,"mappings":"AA+HA;AACA;EACAA;IACA;MACAC,iBACA,4CADA,EAEA,4CAFA,CADA;MAKAC,YACA,4CADA,EAEA,4CAFA,CALA;MASAC,kBATA;MAUAC,aAVA;MAWAC,eAXA;MAYAC,aAZA;MAaAC,SAbA;MAcAC,QAdA;MAeAC,UAfA;MAgBAC,eAhBA;MAiBAC;QACAC;MADA,CAjBA;MAoBAC,cApBA;MAqBAC,UArBA;MAsBAC,UAtBA;MAuBAC,YAvBA;MAwBAC;IAxBA;EA2BA,CA7BA;;EA8BAC;IACAC;MACA;IACA,CAHA;;IAIA;MACA;MACA;MACA;MACAC;MACA;MACAC;MACA;MACA;MACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAA;IACA,CArBA;;IAsBAC;MACA;MACA;IACA,CAzBA;;IA0BAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CApCA;;IAqCAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CA7CA;;IA8CA;MACA;MACA3B;MACAA;MACA;QACA4B,cADA;QAEAC,oFAFA;QAGA7B;MAHA,GAIA8B,IAJA,CAIAC;QACA;MACA,CANA;IAOA,CAzDA;;IA0DA;MACA;QACAC,gBADA;QAEAC,kBAFA;QAGAC;MAHA;MAMA;MACA;QACAF,gBADA;QAEAC,kBAFA;QAGAC,aAHA;QAIAzB,eAJA;QAKA0B,uCALA;QAMAC;MANA;MAQA;QACAR,cADA;QAEAC,gFAFA;QAGA7B;MAHA,GAIA8B,IAJA,CAIAC;QACA;MACA,CANA;IAOA,CAjFA;;IAkFA;MACA;QACAM,6CADA;QAEAC,2CAFA;QAGAC,mCAHA;QAIAC;MAJA;MAMA;MACA;QACAH,6CADA;QAEAC,2CAFA;QAGAC,mCAHA;QAIAC,iCAJA;QAKA/B,eALA;QAMA0B,uCANA;QAOAC;MAPA;MASA;QACAR,cADA;QAEAC,yFAFA;QAGA7B;MAHA,GAIA8B,IAJA,CAIAC;QACA;QACA;MACA,CAPA;IAQA,CA3GA;;IA4GAU;MACA,eACA;QAAAC;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAF;QAAAC;QAAAC;MAAA,CAFA,EAGA;QAAAF;QAAAC;QAAAC;MAAA,CAHA,EAIA;QAAAF;QAAAC;QAAAC;MAAA,CAJA,EAKA;QAAAF;QAAAC;QAAAC;MAAA,CALA;IAOA,CApHA;;IAqHAC;MACA;QACA,mBACAC;MACA,CAHA;MAIAC;QACA;QACA;UACAC;YACAC;cACA;cACAC;YAFA,CADA;YAKAC,cALA;YAMA;YACAC,cAPA;YAQAC,aARA;YASA;YACAnB,cAVA;YAWA;YACAoB,SAZA;YAaAC,MAbA;YAcAC;UAdA,CADA;UAiBAC,WAjBA;UAkBAC;YACAzC,mBADA,CACA;;UADA,CAlBA;UAqBA0C;YAAAzB;UAAA,CArBA;UAsBA0B;YACAC;cACAC;YADA,CADA;YAIAC;cACAD;YADA,CAJA;YAOAE;cACAF;YADA;UAPA,CAtBA;UAiCAG;YAAAT;UAAA,CAjCA;UAkCAU,SACA;YACAC,YADA;YAEAjC,WAFA;YAEA;YACAkC;cACAN,UADA;cAEAO;YAFA,CAHA;YAOAC,oBAPA;YAQAC,YARA;YASAC;cAAAC;YAAA,CATA;YASA;YACAhB;cACAiB;gBACA;AACA,oEADA;cAEA;YAJA;UAVA,CADA,EAkBA;YACAP,YADA;YAEAjC,WAFA;YAGAkC;cACAN,UADA;cAEAO;YAFA,CAHA;YAOAC,oBAPA;YAQAC,YARA;YASAC;cAAAC;YAAA,CATA;YAUAhB;cACAiB;gBACA;AACA,0EADA;cAEA;YAJA;UAVA,CAlBA;QAlCA;MAuEA,CAzEA;IA0EA;;EApMA,CA9BA;EAoOAC;IACA1E;MACA2E;QACA;QACA;QACA;QACA;QACAC;UACA;YACA;YACA;UACA,CAHA;QAIA,CALA,EAKA,GALA;MAMA,CAZA;MAaAC;IAbA,CADA;IAgBA5E;MACA0E;QACA;QACA;QACA;QACA;QACAC;UACA;YACA;YACA;UACA,CAHA;QAIA,CALA,EAKA,GALA;MAMA,CAZA;MAaAC;IAbA;EAhBA,CApOA;;EAqQA;IACA,sDADA,CACA;;IACA;IACA;IACA;IACA;IACAD;MACA;QACA;MACA,CAFA;IAGA,CAJA,EAIA,GAJA;EAKA;;AAhRA","names":["data","statisticsDate","trendDate","statisticsTime","trendTime","beginTime","endTime","today","week","sign","loginName","formInline","user","statistics","value1","charts","score","source","methods","handleSizeChange","beginMonth","beginDate","endMonth","endDate","dateTime","todayTime","weekTime","monthTime","method","url","then","result","account","password","type","key","timestamp","statistics_start_time","statistics_end_time","trend_start_time","trend_end_time","change","time","total","total_money","draw","resolve","newPromise","legend","textStyle","fontSize","icon","itemHeight","itemWidth","left","top","bottom","tooltip","dataset","xAxis","yAxis","axisLine","show","axisTick","splitLine","grid","series","name","label","position","barCategoryGap","barWidth","itemStyle","color","formatter","watch","handler","setTimeout","deep"],"sourceRoot":"src/views/statistics","sources":["Statistics.vue"],"sourcesContent":["<template>\r\n  <div class=\"main\" v-if=\"statistics\">\r\n    <div class=\"main1\">\r\n      <div class=\"main1-head\">\r\n        <div class=\"title1\">实时统计</div>\r\n      </div>\r\n      <div class=\"content1\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.real_data_statistics.total_invoiced }}\r\n              </div>\r\n              <div>开票总数</div>\r\n            </div></el-col\r\n          >\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.real_data_statistics.total_invoiced_amount }}\r\n              </div>\r\n              <div>开票总额</div>\r\n            </div></el-col\r\n          >\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.real_data_statistics.reviewed_number }}\r\n              </div>\r\n              <div>待审核数</div>\r\n            </div></el-col\r\n          >\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.real_data_statistics.reviewed_amount }}\r\n              </div>\r\n              <div>待审核金额</div>\r\n            </div></el-col\r\n          >\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.real_data_statistics.invoiced_number }}\r\n              </div>\r\n              <div>已开票数</div>\r\n            </div></el-col\r\n          >\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.real_data_statistics.invoiced_amount }}\r\n              </div>\r\n              <div>已开票金额</div>\r\n            </div></el-col\r\n          >\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n    <div class=\"main1\">\r\n      <div class=\"main2-head\">\r\n        <div class=\"title1\">开票统计</div>\r\n        <div class=\"head-type\">\r\n          <div @click=\"todayTime()\">今日</div>\r\n          <div @click=\"weekTime()\">本周</div>\r\n          <div @click=\"monthTime()\">本月</div>\r\n        </div>\r\n        <div class=\"date\">\r\n          <el-date-picker\r\n            v-model=\"statisticsDate\"\r\n            type=\"daterange\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            :default-time=\"['00:00:00', '23:59:59']\"\r\n          >\r\n          </el-date-picker>\r\n        </div>\r\n      </div>\r\n      <div class=\"content1\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.slot_data_statistics.total_invoiced }}\r\n              </div>\r\n              <div>开票总数</div>\r\n            </div></el-col\r\n          >\r\n          <el-col :span=\"4\"\r\n            ><div class=\"grid-content\">\r\n              <div>\r\n                {{ statistics.slot_data_statistics.total_invoiced_amount }}\r\n              </div>\r\n              <div>开票总额</div>\r\n            </div></el-col\r\n          >\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n    <div class=\"main2\">\r\n      <div class=\"main2-head\">\r\n        <div class=\"title1\">开票趋势</div>\r\n\r\n        <div class=\"date\">\r\n          <el-date-picker\r\n            v-model=\"trendDate\"\r\n            type=\"daterange\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            :default-time=\"['00:00:00', '23:59:59']\"\r\n          >\r\n          </el-date-picker>\r\n        </div>\r\n      </div>\r\n      <div class=\"content3\">\r\n        <div class=\"report-wrap\">\r\n          <div\r\n            id=\"report\"\r\n            ref=\"myChart\"\r\n            style=\"width: 100%; height: 270px\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n  <script>\r\nimport * as echarts from \"echarts\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      statisticsDate: [\r\n        \"Tue Oct 11 2022 00:00:00 GMT+0800 (中国标准时间)\",\r\n        \"Tue Nov 15 2022 23:59:59 GMT+0800 (中国标准时间)\",\r\n      ],\r\n      trendDate: [\r\n        \"Tue Oct 11 2022 00:00:00 GMT+0800 (中国标准时间)\",\r\n        \"Tue Nov 15 2022 23:59:59 GMT+0800 (中国标准时间)\",\r\n      ],\r\n      statisticsTime: [],\r\n      trendTime: [],\r\n      beginTime: null,\r\n      endTime: null,\r\n      today: \"\",\r\n      week: [],\r\n      sign: null,\r\n      loginName: null,\r\n      formInline: {\r\n        user: \"\",\r\n      },\r\n      statistics: \"\",\r\n      value1: \"\",\r\n      charts: \"\",\r\n      score: \"100\",\r\n      source: [\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n    },\r\n    async getTime(dateArr, dateTime) {\r\n      let dateBegin = new Date(dateArr[0]);\r\n      let beginYear = dateBegin.getFullYear();\r\n      let beginMonth = dateBegin.getMonth() + 1;\r\n      beginMonth = beginMonth < 10 ? \"0\" + beginMonth : beginMonth;\r\n      let beginDate = dateBegin.getDate();\r\n      beginDate = beginDate < 10 ? \"0\" + beginDate : beginDate;\r\n      let beginTime = beginYear + \"-\" + beginMonth + \"-\" + beginDate;\r\n      let dateEnd = new Date(dateArr[1]);\r\n      let endYear = dateEnd.getFullYear();\r\n      let endMonth = dateEnd.getMonth() + 1;\r\n      endMonth = endMonth < 10 ? \"0\" + endMonth : endMonth;\r\n      let endDate = dateEnd.getDate();\r\n      endDate = endDate < 10 ? \"0\" + endDate : endDate;\r\n      let endTime = endYear + \"-\" + endMonth + \"-\" + endDate;\r\n      dateTime[0] = beginTime;\r\n      dateTime[1] = endTime;\r\n    },\r\n    todayTime() {\r\n      this.$set(this.statisticsDate, 0, new Date().toString());\r\n      this.$set(this.statisticsDate, 1, new Date().toString());\r\n    },\r\n    weekTime() {\r\n      let date = new Date();\r\n      let year = date.getFullYear();\r\n      let month = date.getMonth();\r\n      let day = date.getDate();\r\n      let week = date.getDay();\r\n      let thisWeekStartDate = new Date(year, month, day - week + 1);\r\n      let thisWeekEndDate = new Date(year, month + 1, day - week + 7);\r\n      this.$set(this.statisticsDate, 0, thisWeekStartDate);\r\n      this.$set(this.statisticsDate, 1, thisWeekEndDate);\r\n    },\r\n    monthTime() {\r\n      let date = new Date();\r\n      let year = date.getFullYear();\r\n      let month = date.getMonth();\r\n      let thisMonthStartDate = new Date(year, month, 1);\r\n      let thisMonthEndDate = new Date(year, month + 1, 0);\r\n      this.$set(this.statisticsDate, 0, thisMonthStartDate);\r\n      this.$set(this.statisticsDate, 1, thisMonthEndDate);\r\n    },\r\n    async getSign(time, data2) {\r\n      let data = data2;\r\n      data[\"key\"] = \"c4ca4238a0b923820dcc509a6f75849b\";\r\n      data[\"timestamp\"] = time;\r\n      await this.$axios({\r\n        method: \"post\",\r\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/Apibase/getSign\",\r\n        data: data,\r\n      }).then((result) => {\r\n        this.sign = result.data.data;\r\n      });\r\n    },\r\n    async login(time) {\r\n      let data1 = {\r\n        account: \"admin\",\r\n        password: \"123456\",\r\n        type: \"admin\",\r\n      };\r\n\r\n      await this.getSign(time, data1);\r\n      let data = {\r\n        account: \"admin\",\r\n        password: \"123456\",\r\n        type: \"admin\",\r\n        sign: this.sign,\r\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\r\n        timestamp: time,\r\n      };\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/login/Login\",\r\n        data: data,\r\n      }).then((result) => {\r\n        this.loginName = result.data.data.nickname;\r\n      });\r\n    },\r\n    async dataStatistics(time) {\r\n      let data1 = {\r\n        statistics_start_time: this.statisticsTime[0],\r\n        statistics_end_time: this.statisticsTime[1],\r\n        trend_start_time: this.trendTime[0],\r\n        trend_end_time: this.trendTime[1],\r\n      };\r\n      await this.getSign(time, data1);\r\n      let data = {\r\n        statistics_start_time: this.statisticsTime[0],\r\n        statistics_end_time: this.statisticsTime[1],\r\n        trend_start_time: this.trendTime[0],\r\n        trend_end_time: this.trendTime[1],\r\n        sign: this.sign,\r\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\r\n        timestamp: time,\r\n      };\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/admin/dataStatistics\",\r\n        data: data,\r\n      }).then((result) => {\r\n        this.statistics = result.data.data;\r\n        this.source = result.data.data.trend_data_statistics;\r\n      });\r\n    },\r\n    change() {\r\n      this.source = [\r\n        { time: \"2021-10-11\", total: 9, total_money: 110 },\r\n        { time: \"2022-150-12\", total: 9, total_money: 110 },\r\n        { time: \"2022-10-13\", total: 9, total_money: 110 },\r\n        { time: \"2022-10-12\", total: 9, total_money: 110 },\r\n        { time: \"2022-10-13\", total: 9, total_money: 110 },\r\n      ];\r\n    },\r\n    draw() {\r\n      let newPromise = new Promise((resolve) => {\r\n        if(!this.echarts)\r\n        resolve();\r\n      });\r\n      newPromise.then(() => {\r\n        this.charts = echarts.init(this.$refs.myChart);\r\n        this.charts.setOption({\r\n          legend: {\r\n            textStyle: {\r\n              //图例字体大小\r\n              fontSize: 10,\r\n            },\r\n            icon: \"circle\",\r\n            //图例大小\r\n            itemHeight: 10,\r\n            itemWidth: 10,\r\n            //图例滚动显示\r\n            type: \"scroll\",\r\n            //图例位置\r\n            left: 550,\r\n            top: 0,\r\n            bottom: 30,\r\n          },\r\n          tooltip: {},\r\n          dataset: {\r\n            source: this.source, //连接数据\r\n          },\r\n          xAxis: { type: \"category\" },\r\n          yAxis: {\r\n            axisLine: {\r\n              show: true,\r\n            },\r\n            axisTick: {\r\n              show: true,\r\n            },\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n          },\r\n          grid: { bottom: 30 },\r\n          series: [\r\n            {\r\n              name: \"开票总数\",\r\n              type: \"bar\", //表示这个是柱状图\r\n              label: {\r\n                show: true,\r\n                position: \"top\",\r\n              },\r\n              barCategoryGap: \"5%\",\r\n              barWidth: 10,\r\n              itemStyle: { color: \"#49a9ee\" }, //定义颜色\r\n              tooltip: {\r\n                formatter: (params) => {\r\n                  return ` ${params.name.slice(0, 3)} <br/>\r\n                         ${params.seriesName}:${params.value.total}`;\r\n                },\r\n              },\r\n            },\r\n            {\r\n              name: \"开票总额\",\r\n              type: \"bar\",\r\n              label: {\r\n                show: true,\r\n                position: \"top\",\r\n              },\r\n              barCategoryGap: \"5%\",\r\n              barWidth: 10,\r\n              itemStyle: { color: \"#98D87D\" },\r\n              tooltip: {\r\n                formatter: (params) => {\r\n                  return ` ${params.name} <br/>\r\n                         ${params.seriesName}:${params.value.total_money}`;\r\n                },\r\n              },\r\n            },\r\n          ],\r\n        });\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    statisticsDate: {\r\n      handler: function () {\r\n        let time = parseInt(new Date().getTime() / 1000) + \"\";\r\n        this.getTime(this.statisticsDate, this.statisticsTime);\r\n        this.getTime(this.trendDate, this.trendTime);\r\n        this.dataStatistics(time);\r\n        setTimeout(() => {\r\n          this.$nextTick(function () {\r\n            this.charts.dispose();\r\n            this.draw();\r\n          });\r\n        }, 500);\r\n      },\r\n      deep: true,\r\n    },\r\n    trendDate: {\r\n      handler: function () {\r\n        let time = parseInt(new Date().getTime() / 1000) + \"\";\r\n        this.getTime(this.statisticsDate, this.statisticsTime);\r\n        this.getTime(this.trendDate, this.trendTime);\r\n        this.dataStatistics(time);\r\n        setTimeout(() => {\r\n          this.$nextTick(function () {\r\n            this.charts.dispose();\r\n            this.draw();\r\n          });\r\n        }, 500);\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  async mounted() {\r\n    let time = parseInt(new Date().getTime() / 1000) + \"\"; //获取10位时间戳\r\n    await this.login(time);\r\n    await this.getTime(this.statisticsDate, this.statisticsTime);\r\n    await this.getTime(this.trendDate, this.trendTime);\r\n    await this.dataStatistics(time);\r\n    setTimeout(() => {\r\n      this.$nextTick(function () {\r\n        this.draw();\r\n      });\r\n    }, 500);\r\n  },\r\n};\r\n</script>\r\n    <style scoped>\r\n.el-header {\r\n  min-width: 1200px;\r\n}\r\n.el-main {\r\n  min-width: 1200px;\r\n  box-sizing: border-box;\r\n}\r\n.main {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-width: 1200px;\r\n  min-height: 740px;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n}\r\n.main1 {\r\n  border: 1px;\r\n  width: 100%;\r\n  height: 210px;\r\n  padding-left: 20px;\r\n  /* padding-right: 20px; */\r\n}\r\n.main1-head {\r\n  min-width: 1100px;\r\n}\r\n.title1 {\r\n  width: 120px;\r\n  height: 35px;\r\n  text-align: center;\r\n  color: #49a9ee;\r\n  position: relative;\r\n}\r\n.title1:after {\r\n  content: \"\";\r\n  display: block;\r\n  width: 120px;\r\n  height: 3px;\r\n  background: #49a9ee;\r\n  position: absolute;\r\n  bottom: 0;\r\n}\r\n.content1 {\r\n  display: flex;\r\n  min-width: 1100px;\r\n  height: 150px;\r\n  margin-top: 30px;\r\n}\r\n.el-row {\r\n  min-width: 1100px;\r\n  height: 150px;\r\n}\r\n.el-col {\r\n  border-radius: 4px;\r\n}\r\n\r\n.grid-content {\r\n  border-radius: 4px;\r\n  min-height: 140px;\r\n}\r\n.grid-content > div:nth-child(1) {\r\n  height: 45px;\r\n  font-size: 25px;\r\n  color: #4e73df;\r\n  text-align: center;\r\n}\r\n.grid-content > div:nth-child(2) {\r\n  height: 40px;\r\n  text-align: center;\r\n}\r\n.row-bg {\r\n  padding: 10px 0;\r\n  background-color: #f9fafc;\r\n}\r\n/deep/ .el-range-separator {\r\n  line-height: 22px !important;\r\n}\r\n/deep/ .el-range__close-icon {\r\n  line-height: 22px !important;\r\n}\r\n.main2 {\r\n  border: 1px;\r\n  width: 100%;\r\n  padding-left: 20px;\r\n  /* padding-right: 20px; */\r\n}\r\n.main2-head {\r\n  min-width: 1100px;\r\n  display: flex;\r\n}\r\n.head-type {\r\n  width: 130px;\r\n  height: 35px;\r\n  display: flex;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  line-height: 35px;\r\n  justify-content: space-around;\r\n  margin-left: 10px;\r\n}\r\n.head-type > div {\r\n  cursor: pointer;\r\n}\r\n.date {\r\n  width: 400px;\r\n}\r\n/deep/ .el-date-editor {\r\n  height: 30px;\r\n  margin-left: 20px;\r\n}\r\n/deep/ .el-date-editor input {\r\n  height: 28px;\r\n}\r\n/deep/ .el-date-editor .el-input__prefix {\r\n  right: -180px;\r\n}\r\n/deep/ .el-date-editor .el-range__icon {\r\n  line-height: 22px !important;\r\n}\r\n.content3 {\r\n  display: flex;\r\n  width: 100%;\r\n  min-width: 1100px;\r\n  height: 300px;\r\n  margin-top: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.report-wrap {\r\n  width: 90%;\r\n  min-width: 1100px;\r\n  height: 280px;\r\n  border: 1px solid rgb(211, 208, 208);\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}