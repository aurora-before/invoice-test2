{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Cookie from \"js-cookie\";\nexport default {\n  data() {\n    return {\n      sign: null,\n      id: null,\n      remark: \"\",\n      info: {},\n      tableInfo: []\n    };\n  },\n\n  computed: {\n    loginName() {\n      return Cookie.get(\"username\");\n    },\n\n    loginSwitch() {\n      return Cookie.get(\"loginSwitch\");\n    }\n\n  },\n  filters: {\n    format(val) {\n      if (val == null || val == \"\") return \"-\";\n      return val;\n    }\n\n  },\n  methods: {\n    handleSizeChange(val) {\n      this.pageSize = val;\n    },\n\n    async getSign(time, data2) {\n      let data = data2;\n      data[\"key\"] = \"c4ca4238a0b923820dcc509a6f75849b\";\n      data[\"timestamp\"] = time;\n      await this.$axios({\n        method: \"post\",\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/Apibase/getSign\",\n        data: data\n      }).then(result => {\n        this.sign = result.data.data;\n      });\n    },\n\n    async invoiceDetail(time, id) {\n      let data1 = {\n        id: id\n      };\n      await this.getSign(time, data1);\n      let data = {\n        id: id,\n        sign: this.sign,\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\n        timestamp: time\n      };\n      this.$axios({\n        method: \"post\",\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/admin/invoiceDetail\",\n        data: data\n      }).then(result => {\n        this.info = result.data.data;\n        this.tableInfo.push(result.data.data);\n      });\n    },\n\n    async invoiceExamine(id) {\n      let time = parseInt(new Date().getTime() / 1000) + \"\";\n      let data1 = {\n        id: id,\n        operator_id: 1,\n        status: \"return\",\n        remark: this.remark,\n        invoice_number: this.info.invoice_number,\n        invoice_content: this.info.invoice_content\n      };\n      await this.getSign(time, data1);\n      let data = {\n        id: id,\n        operator_id: 1,\n        status: \"return\",\n        remark: this.remark,\n        invoice_number: this.info.invoice_number,\n        invoice_content: this.info.invoice_content,\n        sign: this.sign,\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\n        timestamp: time\n      };\n      this.$axios({\n        method: \"post\",\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/admin/invoiceExamine\",\n        data: data\n      }).then(result => {\n        this.remark = \"\";\n        this.$router.go(-1);\n      });\n    }\n\n  },\n\n  async mounted() {\n    let time = parseInt(new Date().getTime() / 1000) + \"\"; //获取10位时间戳\n\n    await this.invoiceDetail(time, this.$route.query.id);\n  }\n\n};","map":{"version":3,"mappings":";AAsHA;AACA;EACAA;IACA;MACAC,UADA;MAEAC,QAFA;MAGAC,UAHA;MAIAC,QAJA;MAKAC;IALA;EAOA,CATA;;EAUAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;IACA;;EANA,CAVA;EAkBAC;IACAC;MACA;MACA;IACA;;EAJA,CAlBA;EAwBAC;IACAC;MACA;IACA,CAHA;;IAIA;MACA;MACAZ;MACAA;MACA;QACAa,cADA;QAEAC,oFAFA;QAGAd;MAHA,GAIAe,IAJA,CAIAC;QACA;MACA,CANA;IAOA,CAfA;;IAgBA;MACA;QACAd;MADA;MAIA;MACA;QACAA,MADA;QAEAD,eAFA;QAGAgB,uCAHA;QAIAC;MAJA;MAMA;QACAL,cADA;QAEAC,wFAFA;QAGAd;MAHA,GAIAe,IAJA,CAIAC;QACA;QACA;MACA,CAPA;IAQA,CApCA;;IAsCA;MACA;MACA;QACAd,MADA;QAEAiB,cAFA;QAGAC,gBAHA;QAIAjB,mBAJA;QAKAkB,wCALA;QAMAC;MANA;MAQA;MACA;QACApB,MADA;QAEAiB,cAFA;QAGAC,gBAHA;QAIAjB,mBAJA;QAKAkB,wCALA;QAMAC,0CANA;QAOArB,eAPA;QAQAgB,uCARA;QASAC;MATA;MAYA;QACAL,cADA;QAEAC,yFAFA;QAGAd;MAHA,GAIAe,IAJA,CAIAC;QACA;QACA;MACA,CAPA;IAQA;;EArEA,CAxBA;;EAgGA;IACA,sDADA,CACA;;IACA;EACA;;AAnGA","names":["data","sign","id","remark","info","tableInfo","computed","loginName","loginSwitch","filters","format","methods","handleSizeChange","method","url","then","result","key","timestamp","operator_id","status","invoice_number","invoice_content"],"sourceRoot":"src/views/wait","sources":["Wait1.vue"],"sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <div class=\"info\">\r\n      <div class=\"info-title\">开票信息</div>\r\n      <div class=\"info-main\">\r\n        <div class=\"info-money\">\r\n          <div>开票金额：100元</div>\r\n          <div>以电子发票进行开具</div>\r\n        </div>\r\n        <div class=\"info-content\">\r\n          <div class=\"info-item\">\r\n            <div>发票类型</div>\r\n            <div>电子发票</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>抬头类型</div>\r\n            <div>{{ info.invoice_type | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>发票抬头</div>\r\n            <div>{{ info.invoice_header | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>税号</div>\r\n            <div>{{ info.invoice_number | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>发票内容</div>\r\n            <div>{{ info.invoice_content | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>发票金额</div>\r\n            <div>{{ info.invoice_money | format }}元</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>备注说明</div>\r\n            <div>{{ info.remark | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>注册地址</div>\r\n            <div>{{ info.register_address | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>注册电话</div>\r\n            <div>{{ info.register_phone | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>开户银行</div>\r\n            <div>{{ info.bank | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>银行账号</div>\r\n            <div>{{ info.bank_number | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>邮箱地址</div>\r\n            <div>{{ info.email | format }}</div>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <div>手机号码</div>\r\n            <div>{{ info.phone | format }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"file\">\r\n      <div class=\"file-title1\">发票文件</div>\r\n      <div class=\"file-link\">\r\n        <div>\r\n          <div>下载链接：</div>\r\n          <span>电子发票下载链接</span>\r\n        </div>\r\n        <div class=\"file-link-btn\">\r\n          <el-button type=\"primary\" size=\"small\">保存</el-button\r\n          >\r\n          <el-button type=\"primary\" size=\"small\">重置</el-button>\r\n        </div>\r\n      </div>\r\n      <div class=\"file-title2\">审核记录</div>\r\n      <div class=\"opinion\">\r\n        <div>审核意见</div>\r\n        <el-form :inline=\"true\" class=\"demo-form-inline\">\r\n          <el-form-item>\r\n            <el-input\r\n              v-model=\"remark\"\r\n              placeholder=\"请填写\"\r\n              id=\"opinion-input\"\r\n            ></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item>\r\n            <el-button\r\n              type=\"primary\"\r\n              id=\"opinion-btn\"\r\n              @click=\"invoiceExamine(info.id)\"\r\n              >退回</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div class=\"file-table\">\r\n        <el-table\r\n          :data=\"tableInfo\"\r\n          :header-cell-style=\"{ background: '#E9E9E9', color: '#555' }\"\r\n        >\r\n          <el-table-column prop=\"\" label=\"操作人\"> </el-table-column>\r\n          <el-table-column prop=\"updatetime\" label=\"操作时间\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"invoice_content\" label=\"发票内容\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"invoice_money\" label=\"发票金额\">\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Cookie from \"js-cookie\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      sign: null,\r\n      id: null,\r\n      remark: \"\",\r\n      info: {},\r\n      tableInfo: [],\r\n    };\r\n  },\r\n  computed: {\r\n    loginName() {\r\n      return Cookie.get(\"username\");\r\n    },\r\n    loginSwitch() {\r\n      return Cookie.get(\"loginSwitch\");\r\n    },\r\n  },\r\n  filters: {\r\n    format(val) {\r\n      if (val == null || val == \"\") return \"-\";\r\n      return val;\r\n    },\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n    },\r\n    async getSign(time, data2) {\r\n      let data = data2;\r\n      data[\"key\"] = \"c4ca4238a0b923820dcc509a6f75849b\";\r\n      data[\"timestamp\"] = time;\r\n      await this.$axios({\r\n        method: \"post\",\r\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/Apibase/getSign\",\r\n        data: data,\r\n      }).then((result) => {\r\n        this.sign = result.data.data;\r\n      });\r\n    },\r\n    async invoiceDetail(time, id) {\r\n      let data1 = {\r\n        id: id,\r\n      };\r\n\r\n      await this.getSign(time, data1);\r\n      let data = {\r\n        id: id,\r\n        sign: this.sign,\r\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\r\n        timestamp: time,\r\n      };\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/admin/invoiceDetail\",\r\n        data: data,\r\n      }).then((result) => {\r\n        this.info = result.data.data;\r\n        this.tableInfo.push(result.data.data);\r\n      });\r\n    },\r\n\r\n    async invoiceExamine(id) {\r\n      let time = parseInt(new Date().getTime() / 1000) + \"\";\r\n      let data1 = {\r\n        id: id,\r\n        operator_id: 1,\r\n        status: \"return\",\r\n        remark: this.remark,\r\n        invoice_number: this.info.invoice_number,\r\n        invoice_content: this.info.invoice_content,\r\n      };\r\n      await this.getSign(time, data1);\r\n      let data = {\r\n        id: id,\r\n        operator_id: 1,\r\n        status: \"return\",\r\n        remark: this.remark,\r\n        invoice_number: this.info.invoice_number,\r\n        invoice_content: this.info.invoice_content,\r\n        sign: this.sign,\r\n        key: \"c4ca4238a0b923820dcc509a6f75849b\",\r\n        timestamp: time,\r\n      };\r\n\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"https://wemall.minephone.com/Invoice/api/public/index.php/api/admin/invoiceExamine\",\r\n        data: data,\r\n      }).then((result) => {\r\n        this.remark=\"\"\r\n         this.$router.go(-1);\r\n      });\r\n    },\r\n  },\r\n\r\n  async mounted() {\r\n    let time = parseInt(new Date().getTime() / 1000) + \"\"; //获取10位时间戳\r\n    await this.invoiceDetail(time, this.$route.query.id);\r\n  },\r\n};\r\n</script>\r\n  <style scoped>\r\n.main {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.info {\r\n  width: 30%;\r\n  /* height: 90%; */\r\n  min-width: 400px;\r\n  height: 700px;\r\n  /* background: red; */\r\n\r\n  margin-right: 30px;\r\n}\r\n.info-title {\r\n  height: 50px;\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n  background: #f7f7f7;\r\n}\r\n.info-main {\r\n  height: 650px;\r\n  width: 100%;\r\n}\r\n.info-money {\r\n  width: 100%;\r\n  height: 90px;\r\n  padding: 20px;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n}\r\n.info-money > div:nth-child(1) {\r\n  height: 30px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n.info-money > div:nth-child(2) {\r\n  height: 20px;\r\n  /* font-weight: bold; */\r\n  color: #999999;\r\n  font-size: 15px;\r\n}\r\n.info-content {\r\n  width: 100%;\r\n  height: 560px;\r\n  padding: 20px;\r\n  padding-top: 10px;\r\n  padding-bottom: 0;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n}\r\n.info-item {\r\n  width: 100%;\r\n  height: 40px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.info-item:nth-of-type(12) {\r\n  height: 50px;\r\n}\r\n.info-item:nth-of-type(13) {\r\n  height: 50px;\r\n}\r\n.info-item > div:nth-child(1) {\r\n  width: 80px;\r\n  height: 100%;\r\n}\r\n.info-item > div:nth-child(2) {\r\n  min-width: 280px;\r\n  height: 100%;\r\n  text-align: right;\r\n}\r\n\r\n.file {\r\n  width: 60%;\r\n  /* height: 90%; */\r\n  min-width: 650px;\r\n  height: 700px;\r\n  /* background: red; */\r\n}\r\n.file-title1,\r\n.file-title2 {\r\n  height: 50px;\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n  background: #f7f7f7;\r\n}\r\n.file-link {\r\n  width: 100%;\r\n  height: 150px;\r\n  padding: 20px;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n}\r\n.file-link > div:nth-child(1) {\r\n  display: flex;\r\n}\r\n.file-link > div:nth-child(1) > div:nth-child(1) {\r\n  width: 15%;\r\n}\r\n.file-link span {\r\n  color: #999999;\r\n  font-size: 14px;\r\n  display: inline-block;\r\n  width: 85%;\r\n  text-align: center;\r\n}\r\n.file-link-btn > button {\r\n  width: 70px;\r\n  height: 30px;\r\n  border: none;\r\n  outline: none;\r\n  border-radius: 5px;\r\n  margin-top: 30px;\r\n  margin-right: 15px;\r\n  color: white;\r\n}\r\n.file-link-btn > button:nth-child(1) {\r\n  background: #108ee9;\r\n  font-size: 14px;\r\n}\r\n.file-link-btn > button:nth-child(2) {\r\n  background: #66ccff;\r\n  font-size: 14px;\r\n}\r\n.opinion {\r\n  padding: 20px;\r\n  width: 100%;\r\n  height: 70px;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.opinion > div:nth-child(1) {\r\n  line-height: 30px;\r\n}\r\n.opinion .el-form {\r\n  background: white;\r\n  width: 250px;\r\n  height: 30px;\r\n  display: flex;\r\n}\r\n.el-form-item {\r\n  height: 30px;\r\n  line-height: 30px;\r\n  margin: 0;\r\n  margin-right: 10px;\r\n}\r\n.el-form-item__content {\r\n  height: 30px;\r\n  line-height: 30px;\r\n}\r\n.opinion /deep/ #opinion-input {\r\n  width: 150px;\r\n  height: 30px;\r\n}\r\n.opinion /deep/ #opinion-btn {\r\n  width: 70px;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  padding: 0;\r\n}\r\n.file-table {\r\n  width: 100%;\r\n  padding: 20px;\r\n  border: 1px;\r\n  box-sizing: border-box;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}